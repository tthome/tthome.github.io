<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Tim Timko</title>
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet">

    <!-- smooth scroll behavior polyfill -->
    <script src="scrollpoly.js"></script>

</head>
<body>
<header>
    <div class="menu">
        <ul>
            <li><a href="#">навыки</a></li>
            <li><a href="#">образование</a></li>
            <li><a href="#">увлечения</a></li>
            <li><a href="#">контакты</a></li>
        </ul>
    </div>
    <div class="about-container">
        <div class="about">
            <div class="photo">
                <img src="assets/avatar.jpg">
            </div>
            <div class="description">
                <p>Я Тимко Тимофей</p>
                <p>мне 25 лет</p>
            </div>
        </div>

    </div>
</header>
<main>
    <div class="skills-container">
        <p class="title">ключевые навыки</p>

        <div class="main-skills skillBox">
            <div class="skill">
                <div class="html image"></div>
                <p>HTML5</p>
            </div>
            <div class="skill">
                <div class="css image"></div>
                <p>CSS3</p>
            </div>
            <div class="skill">
                <div class="js image"></div>
                <p>Java Script</p>
            </div>
        </div>

        <div class="other-skills skillBox">
            <div class="skill">
                <div class="photoshop image"></div>
                <p>Photoshop</p>
            </div>
            <div class="skill">
                <div class="illustrator image"></div>
                <p>Illustrator</p>
            </div>
        </div>
    </div>

    <div class="education-container">
        <p class="title">Образование</p>

        <div class="educations">
            <div class="first-education education">
                <img src="assets/asu.png">
                <div class="info">
                    <p>АлтГУ</p>
                    <p>Факультет прикладной математики и информатики</p>
                    <p>Бакалавр</p>
                </div>

            </div>
            <div class="second-education education">
                <img src="assets/NSTU.png">
                <div class="info">
                    <p>НГТУ</p>
                    <p>Факультет прикладной математики и информатики</p>
                    <p>Магистр</p>
                </div>

            </div>
        </div>
    </div>

</main>
<footer>
    <div class="hobby-container"></div>
    <div class="contacts-container">
        <p class="title">Контакты</p>
        <div class="mail">
            <p>Электронная почта: </p>
            <a href="#">t.t.home@live.ru</a>
        </div>
        <p class="copyright">Тимофей Тимко 2018</p>
    </div>

    <div class="navButton">
        <i class="arrow up"></i>
    </div>
</footer>

<script>
    let menuElem = document.getElementsByClassName('menu')[0];
    let listElements = menuElem.querySelectorAll('ul li');
    let navButtonElem = document.getElementsByClassName('navButton')[0];

    setAttributes(listElements);

    window.onscroll = function () {
        let menuCoords = menuElem.offsetHeight + 100;

        if(menuCoords< pageYOffset){
            navButtonElem.style.opacity = '1';
            navButtonElem.style.cursor = 'pointer';
        }else {
            navButtonElem.style.opacity = '0';
            navButtonElem.style.cursor = 'auto';
        }
    };

    menuElem.onclick = function (event) {
        let target = event.target;
        if (target.tagName !== "A") return false;

        let value = target.parentElement.getAttribute('value');
        if(!value || value === "") return false;

        scrollToElement(value);
    };

    navButtonElem.onclick = function () {
        if(this.style.opacity === '0') return false;
        scrollToElement(menuElem.getBoundingClientRect().top);
    };

    function setAttributes(list) {
        if(list.length < 4 || !list) return;

        try {
            let skillsCoord = document.getElementsByClassName('skills-container')[0].getBoundingClientRect().top +100;
            let educationCoord = document.getElementsByClassName('education-container')[0].getBoundingClientRect().top + 100;
            let hobbyCoord = document.getElementsByClassName('hobby-container')[0].getBoundingClientRect().top;
            let contactsCoord = document.getElementsByClassName('contacts-container')[0].getBoundingClientRect().top;

            list[0].setAttribute("value", skillsCoord);
            list[1].setAttribute("value", educationCoord);
            list[2].setAttribute("value", hobbyCoord);
            list[3].setAttribute("value", contactsCoord);
        }
        catch (error){
            console.log("error in setAttributes: " + error.message);
        }
    }

    function getAge() {
        let ageElem = document.querySelector('.description p:last-child');


        let date = new Date();
        let years = date.getFullYear() - 1993;
        let day = date.getDate() - 4;

        ageElem.innerHTML = years + " лет, " + day + " дней";
    }

    //getAge();

    function scrollToElement(topCoord) {
        window.scrollBy({
            top: topCoord,
            left: 0,
            behavior: 'smooth'
        });
    }


</script>

</body>
</html>
